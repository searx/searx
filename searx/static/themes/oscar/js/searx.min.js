/*! oscar/searx.min.js | 07-02-2015 | https://github.com/asciimoo/searx */
requirejs.config({baseUrl:"./static/themes/oscar/js",paths:{app:"../app"}}),searx.autocompleter&&(searx.searchResults=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:"/autocompleter?q=%QUERY"}),searx.searchResults.initialize()),$(document).ready(function(){searx.autocompleter&&$("#q").typeahead(null,{name:"search-results",displayKey:function(a){return a},source:searx.searchResults.ttAdapter()})}),$(document).ready(function(){$("#q.autofocus").focus(),$(".select-all-on-click").click(function(){$(this).select()}),$(".btn-collapse").click(function(){var a=$(this).data("btn-text-collapsed"),b=$(this).data("btn-text-not-collapsed");""!==a&&""!==b&&(new_html=$(this).hasClass("collapsed")?$(this).html().replace(a,b):$(this).html().replace(b,a),$(this).html(new_html))}),$(".btn-toggle .btn").click(function(){var a="btn-"+$(this).data("btn-class"),b=$(this).data("btn-label-default"),c=$(this).data("btn-label-toggled");""!==c&&(new_html=$(this).hasClass("btn-default")?$(this).html().replace(b,c):$(this).html().replace(c,b),$(this).html(new_html)),$(this).toggleClass(a),$(this).toggleClass("btn-default")}),$(".media-loader").click(function(){var a=$(this).data("target"),b=$(a+" > iframe"),c=b.attr("src");(void 0===c||c===!1)&&b.attr("src",b.data("src"))}),$(".btn-sm").dblclick(function(){var a="btn-"+$(this).data("btn-class");$(this).hasClass("btn-default")?($(".btn-sm > input").attr("checked","checked"),$(".btn-sm > input").prop("checked",!0),$(".btn-sm").addClass(a),$(".btn-sm").addClass("active"),$(".btn-sm").removeClass("btn-default")):($(".btn-sm > input").attr("checked",""),$(".btn-sm > input").removeAttr("checked"),$(".btn-sm > input").checked=!1,$(".btn-sm").removeClass(a),$(".btn-sm").removeClass("active"),$(".btn-sm").addClass("btn-default"))})}),searx.getLeafletLayers=function(){var a={},b="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",c='Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors';a.Mapnik=new L.TileLayer(b,{minZoom:1,maxZoom:19,attribution:c});var d="http://otile{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",e=c+' | Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest</a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png">';a.Mapquest=new L.TileLayer(d,{minZoom:1,maxZoom:18,subdomains:"1234",attribution:e});var f="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",g="Source: Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community ";return a.ArcGIS=new L.TileLayer(f,{minZoom:1,maxZoom:18,attribution:g}),a},searx.createLeafletMap=function(a,b){if(b.layers||(b.layers=searx.getLeafletLayers()),b.boundingbox){var c=L.latLng(b.boundingbox[0],b.boundingbox[2]),d=L.latLng(b.boundingbox[1],b.boundingbox[3]);b.map_bounds=L.latLngBounds(c,d)}L.Icon.Default.imagePath="./static/themes/oscar/img/map";var e=L.map(a);return b.map_bounds?setTimeout(function(){e.fitBounds(b.map_bounds,{maxZoom:17})},0):b.lon&&b.lat&&(b.zoom?e.setView(new L.LatLng(b.lat,b.lon),b.zoom):e.setView(new L.LatLng(b.lat,b.lon),8)),e.addLayer(b.layers.Mapnik),L.control.layers(b.layers).addTo(e),b.geojson&&L.geoJson(b.geojson).addTo(e),e},searx.resultHoverOnBigMap=function(a){searx.bigmap.geojsonLayerClick||(searx.bigmap.geojsonLayer&&searx.bigmap.removeLayer(searx.bigmap.geojsonLayer),searx.bigmap.geojsonLayer=L.geoJson(searx.bigmap.results[a].geojson).addTo(searx.bigmap))},searx.resultClickOnBigMap=function(a){searx.bigmap.geojsonLayerClick&&(searx.bigmap.removeLayer(searx.bigmap.geojsonLayerClick),searx.bigmap.geojsonLayer&&searx.bigmap.removeLayer(searx.bigmap.geojsonLayer)),searx.bigmap.geojsonLayerClick=L.geoJson(searx.bigmap.results[a].geojson).addTo(searx.bigmap);var b=L.latLng(searx.bigmap.results[a].boundingbox[0],searx.bigmap.results[a].boundingbox[2]),c=L.latLng(searx.bigmap.results[a].boundingbox[1],searx.bigmap.results[a].boundingbox[3]),d=L.latLngBounds(b,c);setTimeout(function(){searx.bigmap.fitBounds(d,{maxZoom:17})},0)},$("#search_big_map").click(function(){var a="#big_map_results";if(""===document.map_search.q.value)return!1;$(a).html('<div id="result-overpass-table-loading-1" class="text-center"><img alt="Loading ..." src="/static/themes/oscar/img/loader.gif"></div>'),$(a).removeClass("hidden");var b="./search";return $.ajax({type:"POST",url:b,data:{q:document.map_search.q_map.value,category_map:"on",format:"json",pageno:1},success:function(b){if(!b||!b.results)return $(a).html('<p class="text-muted">error while processing data</p>'),null;if(!b.results.length)return $(a).html('<p class="text-muted">nothing found</p>'),null;newHtml="",$(a).html(""),searx.bigmap.results=[];for(var c in b.results)singl_result=b.results[c],searx.bigmap.results.push(singl_result),newHtml+='<hr><a href="#" onClick="searx.resultClickOnBigMap('+c+');" onmouseover="searx.resultHoverOnBigMap('+c+');">'+singl_result.title+"</a>";$(a).html(newHtml)},fail:function(){$(a).html('<p class="text-muted">could not process query!</p>')}}),!1}),$(document).ready(function(){$("#big_map").length>0&&require(["leaflet-0.7.3.min"],function(){searx.bigmap=searx.createLeafletMap("big_map",{lat:48.13,lon:13.13,zoom:10})}),$(".searx_overpass_request").on("click",function(a){var b="https://overpass-api.de/api/interpreter?data=",c=b+"[out:json][timeout:25];(",d=");out meta;",e=$(this).data("osm-id"),f=$(this).data("osm-type"),g=$(this).data("result-table"),h="#"+$(this).data("result-table-loadicon"),i=["addr:city","addr:country","addr:housenumber","addr:postcode","addr:street"];if(e&&f&&g){g="#"+g;var j=null;switch(f){case"node":j=c+"node("+e+");"+d;break;case"way":j=c+"way("+e+");"+d;break;case"relation":j=c+"relation("+e+");"+d}if(j){$.ajax(j).done(function(a){if(a&&a.elements&&a.elements[0]){var b=a.elements[0],c=$(g).html();for(var d in b.tags)if(null===b.tags.name||-1==i.indexOf(d)){switch(c+="<tr><td>"+d+"</td><td>",d){case"phone":case"fax":c+='<a href="tel:'+b.tags[d].replace(/ /g,"")+'">'+b.tags[d]+"</a>";break;case"email":c+='<a href="mailto:'+b.tags[d]+'">'+b.tags[d]+"</a>";break;case"website":case"url":c+='<a href="'+b.tags[d]+'">'+b.tags[d]+"</a>";break;case"wikidata":c+='<a href="https://www.wikidata.org/wiki/'+b.tags[d]+'">'+b.tags[d]+"</a>";break;case"wikipedia":if(-1!=b.tags[d].indexOf(":")){c+='<a href="https://'+b.tags[d].substring(0,b.tags[d].indexOf(":"))+".wikipedia.org/wiki/"+b.tags[d].substring(b.tags[d].indexOf(":")+1)+'">'+b.tags[d]+"</a>";break}default:c+=b.tags[d]}c+="</td></tr>"}$(g).html(c),$(g).removeClass("hidden"),$(h).addClass("hidden")}}).fail(function(){$(h).html($(h).html()+'<p class="text-muted">could not load data!</p>')})}}$(this).off(a)}),$(".searx_init_map").on("click",function(a){var b=$(this).data("leaflet-target"),c=$(this).data("map-lon"),d=$(this).data("map-lat"),e=$(this).data("map-zoom"),f=$(this).data("map-boundingbox"),g=$(this).data("map-geojson");require(["leaflet-0.7.3.min"],function(){searx.createLeafletMap(b,{lat:d,lon:c,zoom:e,boundingbox:f,geojson:g})}),$(this).off(a)})});