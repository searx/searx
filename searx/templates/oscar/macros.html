<!-- Draw glyphicon icon from bootstrap-theme -->
{% macro icon(action) -%}
    <span class="glyphicon glyphicon-{{ action }}"></span>
{%- endmacro %}

<!-- Draw favicon -->
<!-- TODO: using url_for methode -->
{% macro draw_favicon(favicon) -%}
    <img width="24" height="24" class="favicon" src="static/themes/oscar/img/icons/{{ favicon }}.png" alt="{{ favicon }}" />
{%- endmacro %}

<!-- Draw result header -->
{% macro result_header(result, favicons) -%} 
    <h4 class="result_header">{% if result.engine~".png" in favicons %}{{ draw_favicon(result.engine) }} {% endif %}<a href="{{ result.url }}" rel="noreferrer">{{ result.title|safe|truncate(150) }}</a></h4>
{%- endmacro %}

<!-- Draw result sub header -->
{% macro result_sub_header(result) -%}
    {% if result.publishedDate %}<time class="text-muted" datetime="{{ result.pubdate }}" >{{ result.publishedDate }}</time>{% endif %}
    <p class="external-link"><a href={{ result.url }} target="_BLANK" rel="noreferrer"><i class="fa fa-external-link" aria-hidden="true"></i></a>{{ result.pretty_url }}</p>
    {% if result.magnetlink %}<a href="{{ result.magnetlink }}" class="magnetlink"><i class="fa fa-magnet" aria-hidden="true"></i> {{ _('magnet link') }}</a>{% endif %}
    {% if result.torrentfile %} - <a href="{{ result.torrentfile }}" class="torrentfile" rel="noreferrer"><i class="fa fa-download" aria-hidden="true"></i> {{ _('torrent file') }}</a>{% endif %}
{%- endmacro %}

<!-- Draw result footer -->
{% macro result_footer(result) -%}
    <div class="clearfix"></div>
    <small><a class="text-info" href="https://web.archive.org/web/{{ result.url }}" rel="noreferrer">{{ icon('link') }} {{ _('cached') }}</a></small>
    <div class="pull-right">
    {% for engine in result.engines %}
        <span class="label label-default">{{ engine }}</span>
    {% endfor %}
</div>
{%- endmacro %}

<!-- Draw result footer -->
{% macro result_footer_rtl(result) -%}
    <div class="clearfix"></div>
    <span class="label label-default pull-left">{{ result.engine }}</span>
    <p class="text-muted">{{ result.pretty_url }}&lrm;</p>
{%- endmacro %}

{% macro preferences_item_header(info, label, rtl) -%}
    {% if rtl %}
    <div class="row form-group">
        <label class="col-sm-3 col-md-2 pull-right">{{ label }}</label>
        <span class="col-sm-5 col-md-6 help-block pull-left">{{ info }}</span>
        <div class="col-sm-4 col-md-4">
    {% else %}
    <div class="row form-group">
        <label class="col-sm-3 col-md-2">{{ label }}</label>
        <div class="col-sm-4 col-md-4">
    {% endif %}
{%- endmacro %}

{% macro preferences_item_footer(info, label, rtl) -%}
    {% if rtl %}
        </div>
    </div>
    {% else %}
        </div>
        <span class="col-sm-5 col-md-6 help-block">{{ info }}</span>
    </div>
    {% endif %}
{%- endmacro %}

{% macro checkbox_toggle(id, blocked) -%}
    <div class="checkbox">
        <input class="hidden" type="checkbox" id="{{ id }}" name="{{ id }}"{% if blocked %} checked="checked"{% endif %} />
        <label class="btn btn-success label_hide_if_checked" for="{{ id }}">{{ _('Block') }}</label>
        <label class="btn btn-danger label_hide_if_not_checked" for="{{ id }}">{{ _('Allow') }}</label>
    </div>
{%- endmacro %}
